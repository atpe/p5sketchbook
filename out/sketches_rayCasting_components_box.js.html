<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: sketches/rayCasting/components/box.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: sketches/rayCasting/components/box.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module Box
 * @author Adam Evans
 */

// P5 library imports
import { Vector } from "p5"
// Local component imports
import Boundary from "./boundary"

export default class Box {
  /**
   * Creates a box
   * 
   * @param {Vector} position Center point of box
   * @param {Vector} size Size of box
   * @param {Number} weight Size of border
   * @param {Box} boundingBox Box within which to constrain created box
   */
  constructor(position, size, weight, boundingBox) {
    this.position = position.copy()
    this.size = size.copy()
    this.weight = weight

    this.halfSize = this.calcHalfSize()
    this.sides = this.calcSides()

    if (boundingBox) this.confineWithin(boundingBox)

    this.corners = this.calcCorners()
    this.boundaries = this.calcBoundaries()
  }

  /**
   * Calculates half the size of box
   * 
   * @returns {Vector} Half size of box
   */
  calcHalfSize() {
    return Vector.div(this.size, 2)
  }

  /**
   * Calculates side position values for box
   * @returns {Object}
   */
  calcSides() {
    return {
      t: this.position.y - this.halfSize.y,
      r: this.position.x + this.halfSize.x,
      b: this.position.y + this.halfSize.y,
      l: this.position.x - this.halfSize.x,
    }
  }

  /**
   * Calculates corner points of box
   * 
   * @returns {Vector[]} Array containing corner positions
   */
  calcCorners() {
    return [
      Vector.add(this.position, Vector.mult(this.halfSize, [-1, -1])),
      Vector.add(this.position, Vector.mult(this.halfSize, [+1, -1])),
      Vector.add(this.position, Vector.mult(this.halfSize, [+1, +1])),
      Vector.add(this.position, Vector.mult(this.halfSize, [-1, +1])),
    ]
  }

  /**
   * Creates boundaries for box
   * @returns {Boundary[]} Array containing box boundaries
   */
  calcBoundaries() {
    return [
      new Boundary(this.corners[0], this.corners[1], this.weight),
      new Boundary(this.corners[1], this.corners[2], this.weight),
      new Boundary(this.corners[2], this.corners[3], this.weight),
      new Boundary(this.corners[3], this.corners[0], this.weight),
    ]
  }

  /**
   * Calculates if an object is within box
   * 
   * @param {Object} object Either a vector or an object with position and size properties
   * @returns {Boolean} True if object is at all within world bounds
   */
  contains(object) {
    const radius = (object.size ? object.size / 2 : 0) - this.weight
    const { x, y } = object.position ? object.position : object
    const isWithinX = x + radius > this.sides.l &amp;&amp; x - radius &lt; this.sides.r
    const isWithinY = y + radius > this.sides.t &amp;&amp; y - radius &lt; this.sides.b
    return isWithinX &amp;&amp; isWithinY
  }

  /**
   * Adjusts box so all sides are contained within given box
   * 
   * @param {Box} box Box within which box should be constrained
   */
  confineWithin(box) {
    let isModified = false
    const dt = (box.sides.t + box.weight / 2) - (this.sides.t - this.weight / 2)
    if (dt > 0) {
      isModified = true
      this.size.y -= dt
      this.position.y += dt / 2
    }
    const dl = (box.sides.l + box.weight / 2) - (this.sides.l - this.weight / 2)
    if (dl > 0) {
      isModified = true
      this.size.x -= dl
      this.position.x += dl / 2
    }
    const db = (box.sides.b - box.weight / 2) - (this.sides.b + this.weight / 2)
    if (db &lt; 0) {
      isModified = true
      this.size.y += db
      this.position.y += db / 2
    }
    const dr = (box.sides.r - box.weight / 2) - (this.sides.r + this.weight / 2)
    if (dr &lt; 0) {
      isModified = true
      this.size.x += dr
      this.position.x += dr / 2
    }

    if (isModified) {
      this.halfSize = this.calcHalfSize()
      this.sides = this.calcSides()
    }
  }

  // overlaps(box) {
  //   const left = this.sides.r &lt;= box.sides.l
  //   const right = this.sides.l >= box.sides.r
  //   const above = this.sides.b &lt;= box.sides.t
  //   const below = this.sides.t >= box.sides.b

  //   return !(left || right || above || below)
  // }

  /**
   * Draw the box to the given sketch
   * 
   * @param {p5} sketch The p5.js sketch
   */
  draw(sketch) {
    sketch.push()
    sketch.noStroke()
    sketch.fill([237, 34, 100, 100])
    const { x, y } = this.position
    sketch.rect(x, y, this.size.x, this.size.y)
    sketch.pop()
  }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-App.html">App</a></li><li><a href="module-Boundary.html">Boundary</a></li><li><a href="module-Box.html">Box</a></li><li><a href="module-BubbleSort.html">BubbleSort</a></li><li><a href="module-Caster.html">Caster</a></li><li><a href="module-HeapSort.html">HeapSort</a></li><li><a href="module-Home.html">Home</a></li><li><a href="module-InsertionSort.html">InsertionSort</a></li><li><a href="module-List.html">List</a></li><li><a href="module-MergeSort.html">MergeSort</a></li><li><a href="module-NavBar.html">NavBar</a></li><li><a href="module-Ray.html">Ray</a></li><li><a href="module-RayCasting.html">RayCasting</a></li><li><a href="module-SelectionSort.html">SelectionSort</a></li><li><a href="module-Sketch.html">Sketch</a></li><li><a href="module-sortingAlgorithms.html">sortingAlgorithms</a></li><li><a href="module-World.html">World</a></li></ul><h3>Classes</h3><ul><li><a href="module-Boundary.html">Boundary</a></li><li><a href="module-Box.html">Box</a></li><li><a href="module-BubbleSort.html">BubbleSort</a></li><li><a href="module-Caster.html">Caster</a></li><li><a href="module-HeapSort.html">HeapSort</a></li><li><a href="module-HeapSort-MaxHeap.html">MaxHeap</a></li><li><a href="module-InsertionSort.html">InsertionSort</a></li><li><a href="module-List.html">List</a></li><li><a href="module-MergeSort.html">MergeSort</a></li><li><a href="module-Ray.html">Ray</a></li><li><a href="module-SelectionSort.html">SelectionSort</a></li><li><a href="module-World.html">World</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Jan 13 2022 18:24:37 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>

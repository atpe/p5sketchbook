<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: sketches/sortingAlgorithms/algorithms/heapSort.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: sketches/sortingAlgorithms/algorithms/heapSort.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module HeapSort
 * @author Adam Evans
 */

// Local component imports
import List from '../list'

class MaxHeap {
  /**
   * Creates a max heap
   */
  constructor() {
    this.heap = []
  }

  /**
   * @prop {Number} length Length of heap
   */
  get length() { return this.heap.length }

  /**
   * Calculates parent's index within heap
   * 
   * @param {Number} index Child index
   * @returns {Number} Parent index
   */
  parentIndex(index) {
    return Math.floor((index - 1) / 2)
  }

  /**
   * Calculates left child's index within heap
   * 
   * @param {Number} index Parent index
   * @returns {Number} Left child index
   */
  leftChildIndex(index) {
    return (2 * index + 1)
  }

  /**
   * Calculates right child's index within heap
   * 
   * @param {Number} index Parent index
   * @returns {Number} Right child index
   */
  rightChildIndex(index) {
    return (2 * index + 2)
  }

  /**
   * Swaps two items in heap
   * 
   * @param {Number} a First index to swap
   * @param {Number} b Second index to swap
   */
  swap(a, b) {
    [this.heap[a], this.heap[b]] = [this.heap[b], this.heap[a]]
  }

  /**
   * Adds an item to heap
   * 
   * @param {Number} item Item to add to heap
   */
  push(item) {
    this.heap.push(item)
    var index = this.heap.length - 1
    var parent = this.parentIndex(index)
    // Heapify - Move down heap until parent is larger
    while (this.heap[parent] &amp;&amp; this.heap[parent] &lt; this.heap[index]) {
      this.swap(parent, index)
      index = this.parentIndex(index)
      parent = this.parentIndex(index)
    }
  }

  /**
   * Removes an item from heap
   */
  pop() {
    this.swap(0, this.heap.length - 1)
    var item = this.heap.pop()
    var index = 0
    var leftChild = this.leftChildIndex(index)
    var rightChild = this.rightChildIndex(index)
    // Heapify first item in array to get a correct max heap
    while (this.heap[leftChild] &amp;&amp; this.heap[leftChild] > this.heap[index] || this.heap[rightChild] > this.heap[index]) {
      var max = leftChild
      if (this.heap[rightChild] &amp;&amp; this.heap[rightChild] > this.heap[max]) {
        max = rightChild
      }
      this.swap(max, index)
      index = max
      leftChild = this.leftChildIndex(max)
      rightChild = this.rightChildIndex(max)
    }
    return item
  }

  /**
   * Draws heap to given sketch
   * 
   * @param {p5} sketch The p5 sketch
   * @param {Number} width Width of the canvas
   * @param {Number} height Height of the canvas
   */
  draw(sketch, width, height) {
    const hMax = Math.floor(Math.log(List.max) / Math.log(2))
    const wMax = Math.pow(2, hMax)
    const w = width / (wMax + 1)
    const h = height / (hMax + 1)
    const x = 0
    const y = (height - h * hMax) / 2

    sketch.noStroke()
    sketch.rectMode(sketch.CENTER)
    sketch.textAlign(sketch.CENTER, sketch.CENTER)
    sketch.textSize(w * 0.75)

    let n = 0
    for (let i = 1; i &lt;= this.length; i++) {
      let p = Math.pow(2, n)
      if (i === p) {
        n++
        p *= 2
      }

      const _s = w * (((wMax / p) * 2) * (i % (p / 2)) + (wMax / p))
      const _x = x + _s
      const _y = y + h * (n - 1)

      sketch.stroke(255)
      sketch.strokeWeight(1)
      sketch.fill([237, 34, 100, 55 + (this.heap[i - 1] / height) * 200])
      sketch.ellipse(_x, _y, w * 1.5)
      sketch.noStroke()
      sketch.fill(255)
      sketch.text(Math.round(this.heap[i - 1]), _x, _y)
    }
  }
}


export default class SelectionSort extends List {
  /**
   * Creates a list with heap sort capability
   * 
   * @param {React.RefObject} sketchRef Element in which sketch is rendered
   */
  constructor(sketchRef) {
    const { clientWidth, clientHeight } = sketchRef.current
    super(clientWidth, clientHeight)

    this.heap = new MaxHeap()

    this.i = 0
    this.j = List.max - 1
  }

  /** Resets algorithm and reshuffles items */
  reset() {
    this.i = 0
    this.j = List.max - 1
    this.heap = new MaxHeap()
    this.shuffle()
  }

  /** Sorts items by heap sort */
  sort() {
    if (this.i &lt; this.items.length) {
      // Add to heap
      this.heap.push(this.items[this.i])
      this.i++
    } else if (this.j >= 0) {
      // Remove from heap
      this.items[this.j] = this.heap.pop()
      this.j--
    }
  }

  /**
   * Highlights key points of algorithm on given sketch
   * 
   * @param {p5} sketch The p5 sketch
   */
  highlight(sketch) {
    if (this.i === List.max &amp;&amp; this.j === 0) return
    sketch.push()
    sketch.strokeWeight(2)
    sketch.stroke([100, 255, 100, 100])
    sketch.line(this.i * this.spacing, 0, this.i * this.spacing, this.height)
    sketch.stroke([255, 100, 100, 100])
    sketch.line(this.j * this.spacing, 0, this.j * this.spacing, this.height)
    sketch.stroke([100, 100, 255, 100])
    sketch.line(this._i * this.spacing, 0, this._i * this.spacing, this.height)

    this.heap.draw(sketch, this.width, this.height)
    sketch.pop()
  }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-App.html">App</a></li><li><a href="module-Boundary.html">Boundary</a></li><li><a href="module-Box.html">Box</a></li><li><a href="module-BubbleSort.html">BubbleSort</a></li><li><a href="module-Caster.html">Caster</a></li><li><a href="module-HeapSort.html">HeapSort</a></li><li><a href="module-Home.html">Home</a></li><li><a href="module-InsertionSort.html">InsertionSort</a></li><li><a href="module-List.html">List</a></li><li><a href="module-MergeSort.html">MergeSort</a></li><li><a href="module-NavBar.html">NavBar</a></li><li><a href="module-Ray.html">Ray</a></li><li><a href="module-RayCasting.html">RayCasting</a></li><li><a href="module-SelectionSort.html">SelectionSort</a></li><li><a href="module-Sketch.html">Sketch</a></li><li><a href="module-sortingAlgorithms.html">sortingAlgorithms</a></li><li><a href="module-World.html">World</a></li></ul><h3>Classes</h3><ul><li><a href="module-Boundary.html">Boundary</a></li><li><a href="module-Box.html">Box</a></li><li><a href="module-BubbleSort.html">BubbleSort</a></li><li><a href="module-Caster.html">Caster</a></li><li><a href="module-HeapSort.html">HeapSort</a></li><li><a href="module-HeapSort-MaxHeap.html">MaxHeap</a></li><li><a href="module-InsertionSort.html">InsertionSort</a></li><li><a href="module-List.html">List</a></li><li><a href="module-MergeSort.html">MergeSort</a></li><li><a href="module-Ray.html">Ray</a></li><li><a href="module-SelectionSort.html">SelectionSort</a></li><li><a href="module-World.html">World</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Jan 13 2022 18:24:37 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
